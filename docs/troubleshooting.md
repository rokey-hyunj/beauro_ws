# ğŸ”§ BeauRo íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ

ì´ ë¬¸ì„œëŠ” BeauRo ì‹œìŠ¤í…œ ìš´ì˜ ì¤‘ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë¬¸ì œë“¤ê³¼ í•´ê²° ë°©ë²•ì„ ì •ë¦¬í•©ë‹ˆë‹¤.

## ëª©ì°¨

- [ë¹ ë¥¸ ì§„ë‹¨ ê°€ì´ë“œ](#ë¹ ë¥¸-ì§„ë‹¨-ê°€ì´ë“œ)
- [ì‹œìŠ¤í…œ ì‹œì‘ ë¬¸ì œ](#ì‹œìŠ¤í…œ-ì‹œì‘-ë¬¸ì œ)
- [ë¡œë´‡ ì œì–´ ë¬¸ì œ](#ë¡œë´‡-ì œì–´-ë¬¸ì œ)
- [ë„¤íŠ¸ì›Œí¬ ë° í†µì‹  ë¬¸ì œ](#ë„¤íŠ¸ì›Œí¬-ë°-í†µì‹ -ë¬¸ì œ)
- [Firebase ì—°ë™ ë¬¸ì œ](#firebase-ì—°ë™-ë¬¸ì œ)
- [ì‘ì—… ì‹¤í–‰ ë¬¸ì œ](#ì‘ì—…-ì‹¤í–‰-ë¬¸ì œ)
- [ì—ëŸ¬ ë³µêµ¬ ë¬¸ì œ](#ì—ëŸ¬-ë³µêµ¬-ë¬¸ì œ)
- [ê·¸ë¦¬í¼ ë° I/O ë¬¸ì œ](#ê·¸ë¦¬í¼-ë°-io-ë¬¸ì œ)
- [ì„±ëŠ¥ ë° ì •í™•ë„ ë¬¸ì œ](#ì„±ëŠ¥-ë°-ì •í™•ë„-ë¬¸ì œ)
- [ë°ì´í„° ë° ì„¤ì • ë¬¸ì œ](#ë°ì´í„°-ë°-ì„¤ì •-ë¬¸ì œ)
- [ê¸´ê¸‰ ìƒí™© ëŒ€ì²˜](#ê¸´ê¸‰-ìƒí™©-ëŒ€ì²˜)

---

## ë¹ ë¥¸ ì§„ë‹¨ ê°€ì´ë“œ

### ì¦ìƒë³„ ë¹ ë¥¸ ì°¾ê¸°

| ì¦ìƒ | ê°€ëŠ¥í•œ ì›ì¸ | ì„¹ì…˜ |
|------|------------|------|
| í”„ë¡œê·¸ë¨ì´ ì‹œì‘ë˜ì§€ ì•ŠìŒ | Python íŒ¨í‚¤ì§€, Firebase | [ì‹œìŠ¤í…œ ì‹œì‘](#ì‹œìŠ¤í…œ-ì‹œì‘-ë¬¸ì œ) |
| ë¡œë´‡ì´ ì›€ì§ì´ì§€ ì•ŠìŒ | Servo-Off, ë„¤íŠ¸ì›Œí¬ | [ë¡œë´‡ ì œì–´](#ë¡œë´‡-ì œì–´-ë¬¸ì œ) |
| Firebase ì—°ê²° ì‹¤íŒ¨ | ì¸ì¦ í‚¤, ì¸í„°ë„· | [Firebase](#firebase-ì—°ë™-ë¬¸ì œ) |
| ì‘ì—… ì¤‘ ë©ˆì¶¤ | ì—ëŸ¬ ìƒíƒœ, ì¶©ëŒ | [ì‘ì—… ì‹¤í–‰](#ì‘ì—…-ì‹¤í–‰-ë¬¸ì œ) |
| ì¢Œí‘œê°€ ì •í™•í•˜ì§€ ì•ŠìŒ | í‹°ì¹­ ì˜¤ë¥˜, TCP | [ì„±ëŠ¥](#ì„±ëŠ¥-ë°-ì •í™•ë„-ë¬¸ì œ) |
| ê·¸ë¦¬í¼ê°€ ë™ì‘í•˜ì§€ ì•ŠìŒ | I/O ì„¤ì •, ê³µì•• | [ê·¸ë¦¬í¼](#ê·¸ë¦¬í¼-ë°-io-ë¬¸ì œ) |

### ê¸°ë³¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

ë¬¸ì œ ë°œìƒ ì‹œ ê°€ì¥ ë¨¼ì € í™•ì¸:

- [ ] ë¡œë´‡ ì „ì›ì´ ì¼œì ¸ ìˆëŠ”ê°€?
- [ ] ë¡œë´‡ì´ Servo-On ìƒíƒœì¸ê°€?
- [ ] E-Stopì´ í•´ì œë˜ì–´ ìˆëŠ”ê°€?
- [ ] ë„¤íŠ¸ì›Œí¬ ì¼€ì´ë¸”ì´ ì—°ê²°ë˜ì–´ ìˆëŠ”ê°€?
- [ ] ROS2 í™˜ê²½ì´ ì†Œì‹±ë˜ì–´ ìˆëŠ”ê°€?
- [ ] ì¸í„°ë„· ì—°ê²°ì´ ì •ìƒì¸ê°€?
- [ ] ì‘ì—… ê³µê°„ì— ì¥ì• ë¬¼ì´ ì—†ëŠ”ê°€?

---

## ì‹œìŠ¤í…œ ì‹œì‘ ë¬¸ì œ

### ë¬¸ì œ 1: `beauro.py` ì‹¤í–‰ ì‹œ ModuleNotFoundError

**ì¦ìƒ**:
```
ModuleNotFoundError: No module named 'firebase_admin'
```

**ì›ì¸**:
- Python íŒ¨í‚¤ì§€ê°€ ì„¤ì¹˜ë˜ì§€ ì•ŠìŒ
- ì˜ëª»ëœ Python í™˜ê²½ ì‚¬ìš©

**í•´ê²° ë°©ë²•**:

```bash
# 1. í˜„ì¬ Python í™•ì¸
which python3
python3 --version

# 2. pip í™•ì¸
which pip3

# 3. íŒ¨í‚¤ì§€ ì¬ì„¤ì¹˜
pip3 install --user firebase-admin PyYAML

# ë˜ëŠ” ì‹œìŠ¤í…œ ì „ì—­ ì„¤ì¹˜
sudo pip3 install firebase-admin PyYAML

# 4. ì„¤ì¹˜ í™•ì¸
python3 -c "import firebase_admin; print('OK')"

# 5. ê°€ìƒí™˜ê²½ ì‚¬ìš© ì¤‘ì´ë¼ë©´
source venv/bin/activate
pip install -r requirements.txt
```

---

### ë¬¸ì œ 2: ROS2 ê´€ë ¨ ì—ëŸ¬

**ì¦ìƒ**:
```
ModuleNotFoundError: No module named 'rclpy'
```

**ì›ì¸**:
- ROS2 í™˜ê²½ì´ ì†Œì‹±ë˜ì§€ ì•ŠìŒ

**í•´ê²° ë°©ë²•**:

```bash
# 1. ROS2 ì†Œì‹±
source /opt/ros/humble/setup.bash
source ~/doosan_ws/install/setup.bash

# 2. ìë™ ì†Œì‹± ì„¤ì • í™•ì¸
cat ~/.bashrc | grep ros

# 3. ì—†ë‹¤ë©´ ì¶”ê°€
echo "source /opt/ros/humble/setup.bash" >> ~/.bashrc
echo "source ~/doosan_ws/install/setup.bash" >> ~/.bashrc

# 4. ìƒˆ í„°ë¯¸ë„ ì—´ê¸° ë˜ëŠ”
source ~/.bashrc

# 5. í™•ì¸
ros2 --version
```

---

### ë¬¸ì œ 3: DR_init ëª¨ë“ˆ ì—ëŸ¬

**ì¦ìƒ**:
```
ModuleNotFoundError: No module named 'DR_init'
```

**ì›ì¸**:
- ë‘ì‚° ë¡œë³´í‹±ìŠ¤ íŒ¨í‚¤ì§€ê°€ ë¹Œë“œë˜ì§€ ì•ŠìŒ
- Python ê²½ë¡œ ë¬¸ì œ

**í•´ê²° ë°©ë²•**:

```bash
# 1. ë‘ì‚° íŒ¨í‚¤ì§€ í™•ì¸
ros2 pkg list | grep dsr

# íŒ¨í‚¤ì§€ê°€ ì—†ë‹¤ë©´:
cd ~/doosan_ws
colcon build --symlink-install
source install/setup.bash

# 2. Python ê²½ë¡œ í™•ì¸
python3 -c "import sys; print('\n'.join(sys.path))"

# 3. PYTHONPATH ì„¤ì • (í•„ìš”ì‹œ)
export PYTHONPATH=$PYTHONPATH:~/doosan_ws/install/dsr_msgs2/lib/python3.10/site-packages
echo "export PYTHONPATH=\$PYTHONPATH:~/doosan_ws/install/dsr_msgs2/lib/python3.10/site-packages" >> ~/.bashrc
```

---

## ë¡œë´‡ ì œì–´ ë¬¸ì œ

### ë¬¸ì œ 4: ë¡œë´‡ì´ ëª…ë ¹ì— ë°˜ì‘í•˜ì§€ ì•ŠìŒ

**ì¦ìƒ**:
- `beauro.py` ì‹¤í–‰ í›„ "Waiting for Web Order..." ì´í›„ ì•„ë¬´ ë°˜ì‘ ì—†ìŒ
- ë˜ëŠ” "Robot initialization failed" ë©”ì‹œì§€

**ì›ì¸**:
- ë¡œë´‡ì´ Servo-Off ìƒíƒœ
- E-Stop í™œì„±í™”
- ë„¤íŠ¸ì›Œí¬ ì—°ê²° ë¶ˆëŸ‰

**ì§„ë‹¨**:

```bash
# 1. ë¡œë´‡ Ping í…ŒìŠ¤íŠ¸
ping 192.168.137.100

# ì„±ê³µ:
# 64 bytes from 192.168.137.100: icmp_seq=1 ttl=64 time=0.5 ms

# ì‹¤íŒ¨:
# From 192.168.137.10 icmp_seq=1 Destination Host Unreachable

# 2. ROS2 í† í”½ í™•ì¸
ros2 topic list | grep dsr01

# ì •ìƒ:
# /dsr01/state/current_pose
# /dsr01/state/robot_state
# ...

# 3. ë¡œë´‡ ìƒíƒœ í™•ì¸
ros2 topic echo /dsr01/state/robot_state --once
```

**í•´ê²° ë°©ë²•**:

```bash
# Case 1: ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ
# - ì¼€ì´ë¸” ì¬ì—°ê²°
# - ë¡œë´‡ ì œì–´ê¸° IP í™•ì¸
# - PC ë„¤íŠ¸ì›Œí¬ ì„¤ì • ì¬í™•ì¸

# Case 2: E-Stop
# - í‹°ì¹­ íœë˜íŠ¸ì—ì„œ E-Stop í•´ì œ
# - ì œì–´ê¸°ì˜ ë¬¼ë¦¬ì  E-Stop ë²„íŠ¼ í™•ì¸

# Case 3: Servo-Off
# - íœë˜íŠ¸ì—ì„œ Servo-On ë²„íŠ¼ ëˆ„ë¦„
# - ë˜ëŠ” ìë™ ë³µêµ¬ ì‹œë„:
python3 << EOF
from DSR_ROBOT2 import *
DR_init()
set_robot_control(CONTROL_SERVO_ON)
EOF
```

---

### ë¬¸ì œ 5: ë¡œë´‡ì´ ì—ëŸ¬ ìƒíƒœë¡œ ë©ˆì¶¤

**ì¦ìƒ**:
- ì‘ì—… ì¤‘ê°„ì— ë¡œë´‡ì´ ì •ì§€
- "âŒ Robot Error Detected" ë©”ì‹œì§€

**ì›ì¸**:
- Safe Stop (ìƒíƒœ 3)
- Protective Stop (ìƒíƒœ 6)
- Servo-Off (ìƒíƒœ 9)

**í•´ê²° ë°©ë²•**:

```bash
# 1. í˜„ì¬ ì—ëŸ¬ ìƒíƒœ í™•ì¸
ros2 topic echo /dsr01/state/robot_state --once

# 2. ìë™ ë³µêµ¬ ì‹œë„
# BeauRoëŠ” ìë™ìœ¼ë¡œ ë³µêµ¬ë¥¼ ì‹œë„í•˜ë¯€ë¡œ ì›¹ì—ì„œ "Resume" ë²„íŠ¼ í´ë¦­

# 3. ìˆ˜ë™ ë³µêµ¬
python3 << EOF
from DSR_ROBOT2 import *
DR_init()

# Safe Stop í•´ì œ
set_safe_stop_reset_type(SAFE_STOP_RESET_TYPE_DEFAULT)
set_robot_control(CONTROL_RESET_SAFET_STOP)

# Servo-On
for i in range(3):
    result = set_robot_control(CONTROL_SERVO_ON)
    if result: break
    time.sleep(1)
EOF
```

---

## ë„¤íŠ¸ì›Œí¬ ë° í†µì‹  ë¬¸ì œ

### ë¬¸ì œ 6: ë„¤íŠ¸ì›Œí¬ ì—°ê²° ë¶ˆê°€

**ì¦ìƒ**:
```bash
ping 192.168.137.100
# Destination Host Unreachable
```

**ì›ì¸**:
- IP ì£¼ì†Œ ì¶©ëŒ
- ì„œë¸Œë„· ë¶ˆì¼ì¹˜
- ì¼€ì´ë¸” ë¶ˆëŸ‰

**ì§„ë‹¨**:

```bash
# 1. ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ í™•ì¸
ip addr show

# 2. ë¼ìš°íŒ… í…Œì´ë¸” í™•ì¸
ip route

# 3. ì¼€ì´ë¸” ì—°ê²° í™•ì¸
sudo ethtool enp3s0  # ì¸í„°í˜ì´ìŠ¤ ì´ë¦„ í™•ì¸ í›„
```

**í•´ê²° ë°©ë²•**:

```bash
# 1. ë„¤íŠ¸ì›Œí¬ ì¬ì‹œì‘
sudo systemctl restart NetworkManager

# 2. ê³ ì • IP ì¬ì„¤ì •
sudo nano /etc/netplan/01-network-manager-all.yaml
```

```yaml
network:
  version: 2
  renderer: NetworkManager
  ethernets:
    enp3s0:  # ì‹¤ì œ ì¸í„°í˜ì´ìŠ¤ ì´ë¦„ìœ¼ë¡œ ë³€ê²½
      dhcp4: no
      addresses:
        - 192.168.137.10/24
      routes:
        - to: default
          via: 192.168.137.1
```

```bash
# 3. ì ìš©
sudo netplan apply

# 4. í™•ì¸
ping 192.168.137.100
```

---

### ë¬¸ì œ 7: ROS2 í†µì‹  ëŠê¹€

**ì¦ìƒ**:
- í† í”½ì€ ë³´ì´ì§€ë§Œ ë°ì´í„°ê°€ ì˜¤ì§€ ì•ŠìŒ
- ì„œë¹„ìŠ¤ í˜¸ì¶œ íƒ€ì„ì•„ì›ƒ

**ì›ì¸**:
- DDS ì„¤ì • ë¬¸ì œ
- ë°©í™”ë²½ ì°¨ë‹¨

**í•´ê²° ë°©ë²•**:

```bash
# 1. DDS í™•ì¸
echo $RMW_IMPLEMENTATION

# 2. FastDDSë¡œ ë³€ê²½ (ê¶Œì¥)
export RMW_IMPLEMENTATION=rmw_fastrtps_cpp
echo "export RMW_IMPLEMENTATION=rmw_fastrtps_cpp" >> ~/.bashrc

# 3. ROS_DOMAIN_ID ì„¤ì •
export ROS_DOMAIN_ID=30
echo "export ROS_DOMAIN_ID=30" >> ~/.bashrc

# 4. ë°©í™”ë²½ í™•ì¸
sudo ufw status

# 5. í•„ìš”ì‹œ í¬íŠ¸ í—ˆìš©
sudo ufw allow from 192.168.137.0/24
```

---

## Firebase ì—°ë™ ë¬¸ì œ

### ë¬¸ì œ 8: Firebase ì´ˆê¸°í™” ì‹¤íŒ¨

**ì¦ìƒ**:
```
âŒ Init Error: Could not find the Firebase credentials file
```

**ì›ì¸**:
- `serviceAccountKey.json` íŒŒì¼ ì—†ìŒ
- íŒŒì¼ ê²½ë¡œ ì˜¤ë¥˜

**í•´ê²° ë°©ë²•**:

```bash
# 1. íŒŒì¼ ì¡´ì¬ í™•ì¸
ls -l ~/beauro/serviceAccountKey.json

# 2. ì—†ë‹¤ë©´ Firebase Consoleì—ì„œ ì¬ë‹¤ìš´ë¡œë“œ
# í”„ë¡œì íŠ¸ ì„¤ì • â†’ ì„œë¹„ìŠ¤ ê³„ì • â†’ ìƒˆ ë¹„ê³µê°œ í‚¤ ìƒì„±

# 3. ì˜¬ë°”ë¥¸ ìœ„ì¹˜ë¡œ ì´ë™
cp ~/Downloads/beauro-xxxxx-firebase-adminsdk-xxxxx.json ~/beauro/serviceAccountKey.json

# 4. ê¶Œí•œ ì„¤ì •
chmod 600 ~/beauro/serviceAccountKey.json

# 5. beauro.pyì—ì„œ ê²½ë¡œ í™•ì¸
grep "FIREBASE_KEY_PATH" beauro.py
```

---

### ë¬¸ì œ 9: Database URL ì˜¤ë¥˜

**ì¦ìƒ**:
```
firebase_admin.exceptions.InvalidArgumentError: Invalid database URL
```

**ì›ì¸**:
- Database URLì´ ì˜ëª»ë¨
- í”„ë¡œì íŠ¸ ID ë¶ˆì¼ì¹˜

**í•´ê²° ë°©ë²•**:

```bash
# 1. Firebase Consoleì—ì„œ Database URL í™•ì¸
# Realtime Database â†’ ë°ì´í„°ë² ì´ìŠ¤ URL ë³µì‚¬

# 2. beauro.py ìˆ˜ì •
nano beauro.py
```

```python
# ì˜¬ë°”ë¥¸ URL í˜•ì‹ í™•ì¸
FIREBASE_DB_URL = 'https://beauro-xxxxx.firebaseio.com/'
# ë˜ëŠ”
FIREBASE_DB_URL = 'https://beauro-xxxxx.asia-southeast1.firebasedatabase.app/'
```

---

### ë¬¸ì œ 10: Firebase ë°ì´í„° ì½ê¸°/ì“°ê¸° ì‹¤íŒ¨

**ì¦ìƒ**:
```
firebase_admin.exceptions.PermissionDeniedError: Permission denied
```

**ì›ì¸**:
- Database ë³´ì•ˆ ê·œì¹™ ì œí•œ
- ì¸ì¦ ë¬¸ì œ

**í•´ê²° ë°©ë²•**:

```bash
# Firebase Console â†’ Realtime Database â†’ ê·œì¹™

# í…ŒìŠ¤íŠ¸ ëª¨ë“œ (ê°œë°œìš©):
{
  "rules": {
    ".read": true,
    ".write": true
  }
}

# ìš´ì˜ ëª¨ë“œ:
{
  "rules": {
    "current_order": {
      ".read": true,
      ".write": true
    },
    "robot_state": {
      ".read": true,
      ".write": true
    },
    "task_checkpoint": {
      ".read": true,
      ".write": true
    }
  }
}

# ê·œì¹™ ê²Œì‹œ ë²„íŠ¼ í´ë¦­
```

---

## ì‘ì—… ì‹¤í–‰ ë¬¸ì œ

### ë¬¸ì œ 11: ì£¼ë¬¸ì´ ì‹œì‘ë˜ì§€ ì•ŠìŒ

**ì¦ìƒ**:
- Firebaseì— ì£¼ë¬¸ì„ ìƒì„±í–ˆì§€ë§Œ ë¡œë´‡ì´ ë°˜ì‘ ì—†ìŒ
- "Waiting for Web Order..." ë©”ì‹œì§€ë§Œ ê³„ì† ì¶œë ¥

**ì›ì¸**:
- `status` í•„ë“œê°€ `start`ê°€ ì•„ë‹˜
- DoE Matrix í˜•ì‹ ì˜¤ë¥˜

**ì§„ë‹¨**:

Firebase Console â†’ Realtime Databaseì—ì„œ í™•ì¸:

```json
{
  "current_order": {
    "order_id": "order_20240111_001",
    "status": "start",  // â† ì´ ê°’ì´ "start"ì—¬ì•¼ í•¨
    "doe_matrix": [...]
  }
}
```

**í•´ê²° ë°©ë²•**:

```bash
# 1. Firebase Consoleì—ì„œ ì§ì ‘ ìˆ˜ì •
# current_order/statusë¥¼ "start"ë¡œ ë³€ê²½

# 2. ë˜ëŠ” Pythonìœ¼ë¡œ ì£¼ë¬¸ ìƒì„±
python3 << EOF
import firebase_admin
from firebase_admin import credentials, db

cred = credentials.Certificate('serviceAccountKey.json')
firebase_admin.initialize_app(cred, {
    'databaseURL': 'https://your-project.firebaseio.com/'
})

ref = db.reference('current_order')
ref.set({
    'order_id': 'test_order_001',
    'status': 'start',
    'doe_matrix': [
        {
            'well_id': 'A1',
            'counts': {'l1': 1, 'l2': 0, 'p1': 0, 'p2': 0}
        }
    ]
})
print("ì£¼ë¬¸ ìƒì„± ì™„ë£Œ")
EOF
```

---

### ë¬¸ì œ 12: DoE Matrix íŒŒì‹± ì—ëŸ¬

**ì¦ìƒ**:
```
KeyError: 'well_id'
```

**ì›ì¸**:
- DoE Matrix í˜•ì‹ì´ ì˜ëª»ë¨

**ì˜¬ë°”ë¥¸ í˜•ì‹**:

```json
{
  "current_order": {
    "order_id": "order_001",
    "status": "start",
    "doe_matrix": [
      {
        "well_id": "A1",
        "counts": {
          "l1": 2,
          "l2": 1,
          "p1": 0,
          "p2": 0
        }
      },
      {
        "well_id": "A2",
        "counts": {
          "l1": 0,
          "l2": 1,
          "p1": 1,
          "p2": 1
        }
      }
    ]
  }
}
```

**ì£¼ì˜ì‚¬í•­**:
- `well_id`ëŠ” í•„ìˆ˜ (A1, A2, B1 í˜•ì‹)
- `counts`ì˜ í‚¤ëŠ” ì •í™•íˆ `l1`, `l2`, `p1`, `p2`
- ê°’ì€ ì •ìˆ˜(int)

---

### ë¬¸ì œ 13: íŠ¹ì • ì›°ì—ì„œë§Œ ì—ëŸ¬ ë°œìƒ

**ì¦ìƒ**:
- A1, A2ëŠ” ì„±ê³µí•˜ì§€ë§Œ B1ì—ì„œ ì—ëŸ¬

**ì›ì¸**:
- íŠ¸ë ˆì´ ì¢Œí‘œ ê³„ì‚° ì˜¤ë¥˜
- Pitch ê°’ ì˜ëª» ì„¤ì •

**ì§„ë‹¨**:

```python
# ì¢Œí‘œ ê³„ì‚° í™•ì¸
base = [100, 450, 280, 0, 180, 0]
pitch_x = 57.0
pitch_y = 38.0

# B1 ê³„ì‚°: base.X + pitch_x
b1_x = 100 + 57.0  # = 157.0

# ìˆ˜ë™ ì´ë™ í…ŒìŠ¤íŠ¸
from DSR_ROBOT2 import movel, posx
movel(posx([157.0, 450, 280, 0, 180, 0]), vel=500, acc=200)
```

**í•´ê²° ë°©ë²•**:

```bash
# 1. íŠ¸ë ˆì´ ì¢Œí‘œ ì¬í‹°ì¹­
# coordinate_teaching.md ì°¸ì¡°

# 2. Pitch ê°’ ì¬ì¸¡ì •
# ì‹¤ì œ ìº˜ë¦¬í¼ìŠ¤ë¡œ ì›° ê°„ê²© í™•ì¸

# 3. material_library.yaml ìˆ˜ì •
nano material_library.yaml
```

---

## ì—ëŸ¬ ë³µêµ¬ ë¬¸ì œ

### ë¬¸ì œ 14: ìë™ ë³µêµ¬ê°€ ì‹¤íŒ¨í•¨

**ì¦ìƒ**:
- "Resume" ë²„íŠ¼ì„ ëˆŒë €ì§€ë§Œ ê³„ì† ì—ëŸ¬ ë°œìƒ
- "Retry failed" ë©”ì‹œì§€ ë°˜ë³µ

**ì›ì¸**:
- í•˜ë“œì›¨ì–´ ë¬¸ì œ (E-Stop ë“±)
- ì‹¬ê°í•œ ì—ëŸ¬ ìƒíƒœ

**í•´ê²° ë°©ë²•**:

```bash
# 1. í‹°ì¹­ íœë˜íŠ¸ í™•ì¸
# - E-Stop ìƒíƒœ
# - ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸

# 2. ìˆ˜ë™ ê°œì…
# Case A: E-Stop
#   â†’ E-Stop ë²„íŠ¼ íšŒì „í•˜ì—¬ í•´ì œ
#   â†’ íœë˜íŠ¸ì—ì„œ Servo-On

# Case B: ì¶©ëŒ ê°ì§€
#   â†’ ë¡œë´‡ì„ Free Driveë¡œ ì•ˆì „í•œ ìœ„ì¹˜ë¡œ ì´ë™
#   â†’ Protective Stop í•´ì œ

# Case C: ì „ì› ë¬¸ì œ
#   â†’ ë¡œë´‡ ì œì–´ê¸° ì¬ë¶€íŒ…
#   â†’ í”„ë¡œê·¸ë¨ ì¬ì‹œì‘

# 3. ì²´í¬í¬ì¸íŠ¸ ê°•ì œ ì‚­ì œ (ìµœí›„ ìˆ˜ë‹¨)
python3 << EOF
import firebase_admin
from firebase_admin import credentials, db

cred = credentials.Certificate('serviceAccountKey.json')
firebase_admin.initialize_app(cred, {
    'databaseURL': 'https://your-project.firebaseio.com/'
})

db.reference('task_checkpoint').delete()
print("ì²´í¬í¬ì¸íŠ¸ ì‚­ì œ ì™„ë£Œ")
EOF
```

---

### ë¬¸ì œ 15: ë³µêµ¬ í›„ ì˜ëª»ëœ ìœ„ì¹˜ì—ì„œ ì¬ê°œ

**ì¦ìƒ**:
- Resume í›„ ì˜ˆìƒì¹˜ ëª»í•œ ìœ„ì¹˜ë¡œ ì´ë™

**ì›ì¸**:
- ì²´í¬í¬ì¸íŠ¸ ë°ì´í„° ì†ìƒ
- ìˆ˜ë™ ì´ë™ìœ¼ë¡œ ì¸í•œ ìœ„ì¹˜ ë¶ˆì¼ì¹˜

**í•´ê²° ë°©ë²•**:

```bash
# 1. í˜„ì¬ ì²´í¬í¬ì¸íŠ¸ í™•ì¸
# Firebase Console â†’ task_checkpoint

# 2. ì•ˆì „í•œ ìœ„ì¹˜ë¡œ ìˆ˜ë™ ì´ë™
# Free Drive ëª¨ë“œë¡œ HOME ìœ„ì¹˜ë¡œ ì´ë™

# 3. ì²´í¬í¬ì¸íŠ¸ ì´ˆê¸°í™”
python3 << EOF
from firebase_admin import db
db.reference('task_checkpoint').delete()
db.reference('current_order/status').set('start')
print("ì£¼ë¬¸ ì²˜ìŒë¶€í„° ì¬ì‹œì‘")
EOF

# 4. beauro.py ì¬ì‹¤í–‰
```

---

## ê·¸ë¦¬í¼ ë° I/O ë¬¸ì œ

### ë¬¸ì œ 16: ê·¸ë¦¬í¼ê°€ ë™ì‘í•˜ì§€ ì•ŠìŒ

**ì¦ìƒ**:
- `gripper_control("hold")` í˜¸ì¶œí•´ë„ ë°˜ì‘ ì—†ìŒ

**ì›ì¸**:
- ê³µì•• ì—°ê²° ë¶ˆëŸ‰
- ë””ì§€í„¸ ì¶œë ¥ ì„¤ì • ì˜¤ë¥˜

**ì§„ë‹¨**:

```bash
# 1. ê³µì•• ì••ë ¥ í™•ì¸
# ì»´í”„ë ˆì„œ ì••ë ¥: 0.5~0.6 MPa

# 2. ì—ì–´ í˜¸ìŠ¤ ì—°ê²° í™•ì¸
# ì œì–´ê¸° â†’ ê·¸ë¦¬í¼ ì—°ê²° ìƒíƒœ

# 3. ë””ì§€í„¸ ì¶œë ¥ í…ŒìŠ¤íŠ¸
python3 << EOF
from DSR_ROBOT2 import *
DR_init()

# DO 1ë²ˆ ON
set_digital_output(1, ON)
time.sleep(1)

# DO 1ë²ˆ OFF
set_digital_output(1, OFF)
EOF

# ê·¸ë¦¬í¼ ë™ì‘ ìœ¡ì•ˆ í™•ì¸
```

**í•´ê²° ë°©ë²•**:

```bash
# Case 1: ê³µì•• ë¬¸ì œ
# - ì»´í”„ë ˆì„œ ì „ì› í™•ì¸
# - ì••ë ¥ ì¡°ì ˆ ë°¸ë¸Œ í™•ì¸
# - ì—ì–´ í˜¸ìŠ¤ ëˆ„ê¸° ì ê²€

# Case 2: ì‹ í˜¸ ë¬¸ì œ
# - ë¡œë´‡ ì œì–´ê¸° I/O ì„¤ì • í™•ì¸
# - ì¼€ì´ë¸” ì—°ê²° ì¬í™•ì¸

# Case 3: beauro.py ì½”ë“œ ìˆ˜ì •
nano beauro.py
```

```python
# gripper_control í•¨ìˆ˜ì˜ ì‹ í˜¸ ë§¤í•‘ í™•ì¸
GRIPPER_SIGNALS = {
    "init": [1, 0, 0, 0, 0, 0],    # DO 1ë²ˆ ON
    "hold": [0, 1, 0, 0, 0, 0],    # DO 2ë²ˆ ON
    # ...
}

# ì‹¤ì œ í•˜ë“œì›¨ì–´ ì—°ê²°ì— ë§ê²Œ ìˆ˜ì •
```

---

### ë¬¸ì œ 17: í”¼í« í¡ì…/ë¶„ì£¼ ë¶ˆëŸ‰

**ì¦ìƒ**:
- ì•¡ì²´ë¥¼ í¡ì…í•˜ì§€ ëª»í•¨
- ë˜ëŠ” ì—‰ëš±í•œ ê³³ì— ë¶„ì£¼

**ì›ì¸**:
- í”¼í« ìœ„ì¹˜ ë¶€ì •í™•
- í¡ì… ì‹œê°„ ë¶€ì¡±
- ì—ì–´ ëˆ„ê¸°

**í•´ê²° ë°©ë²•**:

```python
# beauro.pyì—ì„œ í¡ì…/ë¶„ì£¼ íŒŒë¼ë¯¸í„° ì¡°ì •

# 1. í¡ì… ì‹œê°„ ì—°ì¥
time.sleep(1.5)  # ê¸°ë³¸ 1ì´ˆ â†’ 1.5ì´ˆ

# 2. í”¼í« ê¹Šì´ ì¡°ì •
PIPETTE_DIP_DEPTH = 10  # mm, ë” ê¹Šì´ ë‹´ê¸ˆ

# 3. ë¶„ì£¼ ëŒ€ê¸° ì‹œê°„
time.sleep(0.8)  # ì•¡ì²´ê°€ ì™„ì „íˆ ë–¨ì–´ì§ˆ ë•Œê¹Œì§€

# 4. ì¢Œí‘œ ì¬í‹°ì¹­
# coordinate_teaching.md ì°¸ì¡°
```

---

## ì„±ëŠ¥ ë° ì •í™•ë„ ë¬¸ì œ

### ë¬¸ì œ 18: ì¢Œí‘œ ì •í™•ë„ ë¶ˆëŸ‰

**ì¦ìƒ**:
- í‹°ì¹­í•œ ìœ„ì¹˜ì™€ ì‹¤ì œ ë„ë‹¬ ìœ„ì¹˜ê°€ ë‹¤ë¦„

**ì›ì¸**:
- TCP ì„¤ì • ë¶ˆì¼ì¹˜
- ë¡œë´‡ ìº˜ë¦¬ë¸Œë ˆì´ì…˜ í•„ìš”
- í˜ì´ë¡œë“œ ì„¤ì • ì˜¤ë¥˜

**ì§„ë‹¨**:

```python
# í˜„ì¬ TCP í™•ì¸
from DSR_ROBOT2 import get_current_tcp
print(get_current_tcp())

# í˜„ì¬ í˜ì´ë¡œë“œ í™•ì¸
from DSR_ROBOT2 import get_current_tool
print(get_current_tool())
```

**í•´ê²° ë°©ë²•**:

```bash
# 1. TCP ì¬ì„¤ì •
# í‹°ì¹­ íœë˜íŠ¸ â†’ ì„¤ì • â†’ TCP

# 2. beauro.pyì—ì„œ TCP ì§€ì •
nano beauro.py
```

```python
# ë¡œë´‡ ì´ˆê¸°í™” ì‹œ
ROBOT_TCP = "GripperDA_v1"  # ì‹¤ì œ ì‚¬ìš© ì¤‘ì¸ TCP ì´ë¦„

# ë˜ëŠ” ìˆ˜ë™ ì„¤ì •
from DSR_ROBOT2 import set_tcp
set_tcp("GripperDA_v1")
```

```bash
# 3. í˜ì´ë¡œë“œ ì„¤ì •
python3 << EOF
from DSR_ROBOT2 import *
DR_init()

# ê·¸ë¦¬í¼ ë¬´ê²Œ ì„¤ì • (kg, ì§ˆëŸ‰ì¤‘ì‹¬ ì¢Œí‘œ)
set_tool("Tool Weight", 0.5, [0, 0, 100], [1, 0, 0, 0, 1, 0, 0, 0, 1])
EOF
```

---

### ë¬¸ì œ 19: ì†ë„ê°€ ë„ˆë¬´ ëŠë¦¼ ë˜ëŠ” ë¹ ë¦„

**ì¦ìƒ**:
- ì‘ì—… ì†ë„ê°€ ë¶€ì ì ˆí•¨

**ì›ì¸**:
- ì†ë„ íŒŒë¼ë¯¸í„° ì„¤ì •

**í•´ê²° ë°©ë²•**:

```python
# beauro.pyì—ì„œ ì†ë„ ì¡°ì •

# ë¹ ë¥¸ ì´ë™ (ì¬ë£Œ ê°„ ì´ë™)
VEL_MOVE = 2000  # mm/s (ê¸°ë³¸ê°’)
# ë„ˆë¬´ ëŠë¦¬ë©´ â†’ 2500~3000
# ë„ˆë¬´ ë¹ ë¥´ë©´ â†’ 1500~1800

# ì‘ì—… ì†ë„ (ë¶„ì£¼, êµë°˜)
VEL_WORK = 500   # mm/s
# ì •ë°€ë„ í–¥ìƒ í•„ìš” â†’ 300~400
# ì†ë„ í–¥ìƒ í•„ìš” â†’ 600~800

# ìŠ¤í‘¼ ì‘ì—… (ë¶„ë§)
VEL_SPOON = 250  # mm/s (ì²œì²œíˆ)
```

---

### ë¬¸ì œ 20: êµë°˜ì´ ë¶ˆì¶©ë¶„í•¨

**ì¦ìƒ**:
- ìŠ¤í‹± êµë°˜ í›„ì—ë„ ì¬ë£Œê°€ ì„ì´ì§€ ì•ŠìŒ

**ì›ì¸**:
- êµë°˜ íŒ¨í„´ ë¶€ì¡±
- êµë°˜ ì†ë„ ë¶€ì ì ˆ

**í•´ê²° ë°©ë²•**:

```python
# beauro.pyì˜ execute_sticks í•¨ìˆ˜ ìˆ˜ì •

# 1. êµë°˜ ë°˜ë³µ íšŸìˆ˜ ì¦ê°€
for _ in range(3):  # ê¸°ë³¸ 3íšŒ
    # ...

# â†’ 5íšŒë¡œ ì¦ê°€
for _ in range(5):

# 2. êµë°˜ ì†ë„ ì¡°ì •
VEL_WORK = 500  # ê¸°ë³¸ê°’
# â†’ ë” ê°•í•œ êµë°˜ì´ í•„ìš”í•˜ë©´ 600~700

# 3. êµë°˜ íŒ¨í„´ ì¶”ê°€
# STIR_POSES_BASEì— ë” ë§ì€ ìœ„ì¹˜ ì¶”ê°€
STIR_POSES_BASE = [
    [0, 0, 0],
    [10, 0, 0],
    [0, 10, 0],
    [-10, 0, 0],
    [0, -10, 0],
    [5, 5, 0],   # ì¶”ê°€
    [-5, -5, 0], # ì¶”ê°€
]
```

---

## ë°ì´í„° ë° ì„¤ì • ë¬¸ì œ

### ë¬¸ì œ 21: YAML íŒŒì‹± ì—ëŸ¬

**ì¦ìƒ**:
```
yaml.scanner.ScannerError: while scanning...
```

**ì›ì¸**:
- YAML ë¬¸ë²• ì˜¤ë¥˜
- ë“¤ì—¬ì“°ê¸° ë¶ˆì¼ì¹˜

**í•´ê²° ë°©ë²•**:

```bash
# 1. YAML ë¬¸ë²• ê²€ì‚¬
python3 << EOF
import yaml

try:
    with open('material_library.yaml', 'r') as f:
        data = yaml.safe_load(f)
    print("âœ… YAML íŒŒì¼ ì •ìƒ")
except Exception as e:
    print(f"âŒ YAML ì—ëŸ¬: {e}")
EOF

# 2. ì¼ë°˜ì ì¸ YAML ë¬¸ë²• ì˜¤ë¥˜ë“¤:

# ì˜ëª»ëœ ë“¤ì—¬ì“°ê¸° (íƒ­ ì‚¬ìš©)
liquid_A:
	name: "..."  # âŒ íƒ­ ì‚¬ìš©

# ì˜¬ë°”ë¥¸ ë“¤ì—¬ì“°ê¸° (ìŠ¤í˜ì´ìŠ¤ 2ì¹¸)
liquid_A:
  name: "..."  # âœ…

# ì½œë¡  ë’¤ ê³µë°± ì—†ìŒ
position:[400, 0, 300]  # âŒ

position: [400, 0, 300]  # âœ…

# 3. ë°±ì—…ì—ì„œ ë³µì›
cp material_library.yaml.backup material_library.yaml
```

---

### ë¬¸ì œ 22: ì„¤ì • ë³€ê²½ì´ ë°˜ì˜ë˜ì§€ ì•ŠìŒ

**ì¦ìƒ**:
- `material_library.yaml` ìˆ˜ì •í–ˆì§€ë§Œ ì´ì „ ì¢Œí‘œë¡œ ë™ì‘

**ì›ì¸**:
- íŒŒì¼ì„ ì €ì¥í•˜ì§€ ì•ŠìŒ
- ì˜ëª»ëœ íŒŒì¼ í¸ì§‘

**í•´ê²° ë°©ë²•**:

```bash
# 1. íŒŒì¼ ì €ì¥ í™•ì¸
nano material_library.yaml
# Ctrl+O (ì €ì¥), Enter, Ctrl+X (ì¢…ë£Œ)

# 2. íŒŒì¼ ìœ„ì¹˜ í™•ì¸
ls -l ~/beauro/material_library.yaml

# 3. beauro.pyì—ì„œ ì˜¬ë°”ë¥¸ ê²½ë¡œ ë¡œë“œí•˜ëŠ”ì§€ í™•ì¸
grep "LIBRARY_YAML_PATH" beauro.py

# 4. í”„ë¡œê·¸ë¨ ì¬ì‹œì‘ (ë³€ê²½ì‚¬í•­ ì ìš©)
# Ctrl+Cë¡œ ì¢…ë£Œ í›„ ì¬ì‹¤í–‰
python3 beauro.py
```

---

## ê¸´ê¸‰ ìƒí™© ëŒ€ì²˜

### ìƒí™© 1: ë¡œë´‡ì´ ì¶©ëŒ ìœ„í—˜

**ì¦‰ì‹œ ì¡°ì¹˜**:
1. **ë¹„ìƒì •ì§€ ë²„íŠ¼** ëˆ„ë¦„ (ì œì–´ê¸° ë˜ëŠ” íœë˜íŠ¸)
2. ì‚¬ëŒì´ ì•ˆì „ ê±°ë¦¬ í™•ë³´
3. ì¶©ëŒ ê°€ëŠ¥ì„± ìˆëŠ” ë¬¼ì²´ ì œê±°

**ë³µêµ¬**:
```bash
# 1. E-Stop í•´ì œ
# 2. Free Driveë¡œ ì•ˆì „í•œ ìœ„ì¹˜ë¡œ ì´ë™
# 3. ì¢Œí‘œ ì¬í™•ì¸
# 4. í”„ë¡œê·¸ë¨ ì¬ì‹œì‘
```

---

### ìƒí™© 2: ì¬ë£Œ ìœ ì¶œ/ë¹„ì‚°

**ì¦‰ì‹œ ì¡°ì¹˜**:
1. ë¡œë´‡ ì •ì§€ (ë¹„ìƒì •ì§€)
2. ìœ ì¶œ ì¬ë£Œ ì²˜ë¦¬
3. ê·¸ë¦¬í¼/ìš©ê¸° ì ê²€

**ì¬ë°œ ë°©ì§€**:
```python
# ì†ë„ ê°ì†Œ
VEL_SPOON = 200  # ë¶„ë§ ì†ë„ ë” ê°ì†Œ
ACC_SPOON = 150   # ê°€ì†ë„ë„ ê°ì†Œ

# ì´ë™ ê²½ë¡œ ìµœì í™”
# ê¸‰ê²©í•œ ë°©í–¥ ì „í™˜ â†’ radius íŒŒë¼ë¯¸í„° ì¶”ê°€
movel(target, vel=500, acc=200, radius=20)
```

---

### ìƒí™© 3: í”„ë¡œê·¸ë¨ ì‘ë‹µ ì—†ìŒ

**ì¦ìƒ**:
- Ctrl+Cë¡œë„ ì¢…ë£Œë˜ì§€ ì•ŠìŒ

**ì¡°ì¹˜**:
```bash
# 1. ê°•ì œ ì¢…ë£Œ
ps aux | grep beauro.py
kill -9 <PID>

# 2. ë¡œë´‡ ì•ˆì „ ì •ì§€
# íœë˜íŠ¸ì—ì„œ Safe Stop

# 3. ROS2 ë…¸ë“œ ì •ë¦¬
ros2 daemon stop
ros2 daemon start

# 4. ì²´í¬í¬ì¸íŠ¸ í™•ì¸
# Firebase Consoleì—ì„œ task_checkpoint ìƒíƒœ í™•ì¸
```

---

## ë¡œê·¸ ë° ë””ë²„ê¹…

### ë””ë²„ê·¸ ëª¨ë“œ í™œì„±í™”

```python
# beauro.py ì‹œì‘ ë¶€ë¶„ì— ì¶”ê°€
import logging

logging.basicConfig(
    level=logging.DEBUG,
    format='%(asctime)s [%(levelname)s] %(message)s',
    handlers=[
        logging.FileHandler('beauro.log'),
        logging.StreamHandler()
    ]
)
```

### ë¡œê·¸ ë¶„ì„

```bash
# ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸
tail -f beauro.log

# ì—ëŸ¬ë§Œ í•„í„°ë§
grep "ERROR" beauro.log

# íŠ¹ì • ì‘ì—… ê²€ìƒ‰
grep "liquid_A" beauro.log
```

---

## ì˜ˆë°©ì  ìœ ì§€ë³´ìˆ˜

### ì¼ì¼ ì ê²€

- [ ] ë¡œë´‡ ë² ì´ìŠ¤ ê³ ì • ìƒíƒœ
- [ ] ì¼€ì´ë¸” ì†ìƒ ì—¬ë¶€
- [ ] ê·¸ë¦¬í¼ ë™ì‘ í…ŒìŠ¤íŠ¸
- [ ] ê³µì•• ì••ë ¥ í™•ì¸
- [ ] ì¬ë£Œ ìš©ê¸° ê³ ì • ìƒíƒœ

### ì£¼ê°„ ì ê²€

- [ ] ì¢Œí‘œ ì •í™•ë„ ê²€ì¦
- [ ] ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì•ˆì •ì„±
- [ ] Firebase ë°ì´í„° ë°±ì—…
- [ ] ë¡œê·¸ íŒŒì¼ ì •ë¦¬
- [ ] ì†Œí”„íŠ¸ì›¨ì–´ ì—…ë°ì´íŠ¸ í™•ì¸

### ì›”ê°„ ì ê²€

- [ ] ë¡œë´‡ ìº˜ë¦¬ë¸Œë ˆì´ì…˜
- [ ] ê·¸ë¦¬í¼ êµì²´/ì²­ì†Œ
- [ ] ì „ì²´ ì‹œìŠ¤í…œ ì„±ëŠ¥ í‰ê°€
- [ ] ì„¤ì • íŒŒì¼ ë°±ì—…
- [ ] í•˜ë“œì›¨ì–´ ì ê²€ (ë³¼íŠ¸, ë‚˜ì‚¬)

---

## ì§€ì› ë°›ê¸°

### ìê°€ ì§„ë‹¨ í›„ì—ë„ í•´ê²°ë˜ì§€ ì•Šìœ¼ë©´

1. **ë¡œê·¸ ìˆ˜ì§‘**
   ```bash
   # ì‹œìŠ¤í…œ ì •ë³´
   ros2 doctor > system_info.txt
   
   # ë¡œê·¸ ì••ì¶•
   tar -czf beauro_logs_$(date +%Y%m%d).tar.gz beauro.log system_info.txt
   ```

2. **ì´ìŠˆ ë“±ë¡**
   - GitHub Issues: https://github.com/rokey-hyunj/beauro/issues
   - ì œëª©: [BUG] ê°„ë‹¨í•œ ì„¤ëª…
   - ë‚´ìš©: ì¦ìƒ, ì¬í˜„ ë°©ë²•, ë¡œê·¸ ì²¨ë¶€

3. **ì—°ë½ì²˜**
   - ì´ë©”ì¼: hyunjongkim0524@gmail.com

---

**ğŸ“ ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-12-19
**ğŸ“Œ ì‘ì„±ì**: BeauRo Team  
**ğŸ”„ ë²„ì „**: v1.0