# ğŸ§ª BeauRo - Cosmetics R&D Automated Dispensing System

<div align="center">

![Doosan Robotics](https://img.shields.io/badge/Doosan-M0609-blue?style=for-the-badge)
![ROS2](https://img.shields.io/badge/ROS2-Humble-blue?style=for-the-badge)
![Python](https://img.shields.io/badge/Python-3.8+-green?style=for-the-badge)
![Firebase](https://img.shields.io/badge/Firebase-Realtime_DB-orange?style=for-the-badge)
![License](https://img.shields.io/badge/License-MIT-yellow?style=for-the-badge)

**ë‘ì‚° ë¡œë³´í‹±ìŠ¤ M0609 í˜‘ë™ë¡œë´‡ì„ í™œìš©í•œ í™”ì¥í’ˆ ì—°êµ¬ê°œë°œìš© í™”í•™ì•½í’ˆ ìë™ë°°í•© ì‹œìŠ¤í…œ**

[Features](#-ì£¼ìš”-ê¸°ëŠ¥) â€¢ [Architecture](#-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜) â€¢ [Installation](#-ì„¤ì¹˜-ë°©ë²•) â€¢ [Usage](#-ì‚¬ìš©-ë°©ë²•) â€¢ [Contributing](#-ê¸°ì—¬í•˜ê¸°)

</div>

---

## ğŸ“‹ ëª©ì°¨

- [í”„ë¡œì íŠ¸ ì†Œê°œ](#-í”„ë¡œì íŠ¸-ì†Œê°œ)
- [ì£¼ìš” ê¸°ëŠ¥](#-ì£¼ìš”-ê¸°ëŠ¥)
- [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
- [ê¸°ìˆ  ìŠ¤íƒ](#-ê¸°ìˆ -ìŠ¤íƒ)
- [ì„¤ì¹˜ ë°©ë²•](#-ì„¤ì¹˜-ë°©ë²•)
- [ì‚¬ìš© ë°©ë²•](#-ì‚¬ìš©-ë°©ë²•)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#-í”„ë¡œì íŠ¸-êµ¬ì¡°)
- [ì›Œí¬í”Œë¡œìš°](#-ì›Œí¬í”Œë¡œìš°)
- [ì—ëŸ¬ í•¸ë“¤ë§](#-ì—ëŸ¬-í•¸ë“¤ë§-ë°-ë³µêµ¬)
- [ì„¤ì • íŒŒì¼](#-ì„¤ì •-íŒŒì¼)
- [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)
- [ê¸°ì—¬í•˜ê¸°](#-ê¸°ì—¬í•˜ê¸°)
- [íŒ€](#-íŒ€)

---

## ğŸ¯ í”„ë¡œì íŠ¸ ì†Œê°œ

**BeauRo**ëŠ” í™”ì¥í’ˆ ì—°êµ¬ê°œë°œ(R&D) ë‹¨ê³„ì—ì„œ í•„ìš”í•œ í™”í•™ì•½í’ˆì˜ ì •ë°€ ë°°í•© ì‘ì—…ì„ ìë™í™”í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ë‘ì‚° ë¡œë³´í‹±ìŠ¤ì˜ í˜‘ë™ë¡œë´‡ M0609 ëª¨ë¸ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ë©°, ROS2 í”„ë ˆì„ì›Œí¬ì™€ Firebase ì‹¤ì‹œê°„ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ ì›ê²© ëª¨ë‹ˆí„°ë§ ë° ì œì–´ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

### ğŸ”¬ ê°œë°œ ë°°ê²½

í™”ì¥í’ˆ R&D ê³¼ì •ì—ì„œ ë‹¤ì–‘í•œ ì„±ë¶„ì˜ ë°°í•© í…ŒìŠ¤íŠ¸ëŠ” í•„ìˆ˜ì ì´ì§€ë§Œ, ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œì ì´ ì¡´ì¬í•©ë‹ˆë‹¤:
- ë°˜ë³µì ì¸ ìˆ˜ì‘ì—…ìœ¼ë¡œ ì¸í•œ ì—°êµ¬ì›ì˜ í”¼ë¡œë„ ì¦ê°€
- ë¯¸ì„¸í•œ ë°°í•© ë¹„ìœ¨ ì°¨ì´ë¡œ ì¸í•œ ì‹¤í—˜ ì¬í˜„ì„± ë¬¸ì œ
- ìœ í•´ í™”í•™ë¬¼ì§ˆ ë…¸ì¶œ ìœ„í—˜
- ì‹œê°„ê³¼ ì¸ë ¥ ìì›ì˜ ë¹„íš¨ìœ¨ì  ì‚¬ìš©

BeauRoëŠ” ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê³  R&D í”„ë¡œì„¸ìŠ¤ë¥¼ íš¨ìœ¨í™”í•˜ê¸° ìœ„í•´ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤.

### ğŸ“ ì ìš© ë¶„ì•¼

- í™”ì¥í’ˆ í¬ë®¬ëŸ¬ ê°œë°œ ë° í…ŒìŠ¤íŠ¸
- DoE (Design of Experiments) ì‹¤í—˜ ìë™í™”
- ë°°í•© ì¡°ê±´ì— ë”°ë¥¸ ë¬¼ì„± ë³€í™” ì—°êµ¬
- ì‹ ì†Œì¬ ì ìš© ê°€ëŠ¥ì„± í…ŒìŠ¤íŠ¸
- í’ˆì§ˆ ê´€ë¦¬ë¥¼ ìœ„í•œ ì¬í˜„ì„± ë†’ì€ ìƒ˜í”Œ ì œì‘

---

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### ğŸ¤– ë¡œë´‡ ìë™í™” ì‘ì—…

#### 1. **ì•¡ìƒ ì¬ë£Œ ë¶„ì£¼ (Liquid Dispensing)**
- í”¼í« ê·¸ë¦¬í¼ë¥¼ í™œìš©í•œ ì •ë°€ í¡ì…/ë¶„ì£¼
- ë‹¤ë‹¨ê³„ ì†ë„ ì œì–´ë¡œ ì•¡ì²´ ë¹„ì‚° ë°©ì§€
- ë©€í‹°ì›° í”Œë ˆì´íŠ¸ ìë™ ì¸ì‹ ë° ë°°ì¹˜

#### 2. **ë¶„ë§ ì¬ë£Œ íˆ¬ì… (Powder Scooping)**
- ìŠ¤í‘¼ ê·¸ë¦¬í¼ë¥¼ ì´ìš©í•œ ì •ëŸ‰ ì±„ì·¨
- ë ˆë²¨ë§(í‰íƒ„í™”) ë™ì‘ìœ¼ë¡œ ì •í™•í•œ ì–‘ í™•ë³´
- ìŸê¸° ë™ì‘ ìµœì í™”ë¡œ ë¶„ë§ ì†ì‹¤ ìµœì†Œí™”

#### 3. **ìë™ êµë°˜ (Automated Stirring)**
- ìŠ¤í‹± ê·¸ë¦¬í¼ë¡œ ê° ì›° ìë™ êµë°˜
- 3íšŒ ë°˜ë³µ íŒ¨í„´ìœ¼ë¡œ ê· ì¼í•œ í˜¼í•© ë³´ì¥
- íŠ¸ë ˆì´ ì¢Œí‘œ ê¸°ë°˜ ìë™ ìœ„ì¹˜ ê³„ì‚°

#### 4. **íŠ¸ë ˆì´ ì´ì†¡ (Tray Transfer)**
- ì™„ì„±ëœ ìƒ˜í”Œ íŠ¸ë ˆì´ ìë™ ì¶œë ¥
- ì•ˆì „í•œ ê·¸ë¦½ ë° ì´ì†¡ ê²½ë¡œ

### ğŸŒ ì›¹ ê¸°ë°˜ ì œì–´ ì‹œìŠ¤í…œ

- **Firebase Realtime Database ì—°ë™**
  - ì‹¤ì‹œê°„ ì‘ì—… ì§„í–‰ë¥  ëª¨ë‹ˆí„°ë§
  - ì›ê²© ëª…ë ¹ ì „ì†¡ (ì‹œì‘/ì¤‘ì§€/ì¬ê°œ)
  - ì—ëŸ¬ ìƒíƒœ ì¦‰ì‹œ ì•Œë¦¼

- **DoE Matrix ì…ë ¥**
  - ì›¹ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•œ ë°°í•© ë ˆì‹œí”¼ ì„¤ì •
  - Wellë³„ ê° ì„±ë¶„ì˜ íˆ¬ì… íšŸìˆ˜ ì§€ì •
  - JSON í˜•ì‹ì˜ ìœ ì—°í•œ ì‹¤í—˜ ì„¤ê³„

### ğŸ›¡ï¸ ì•ˆì „ ë° ë³µêµ¬ ê¸°ëŠ¥

- **ìë™ ì—ëŸ¬ ê°ì§€**
  - ë¡œë´‡ ìƒíƒœ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ (3, 5, 6, 9, 10ë²ˆ ì—ëŸ¬ ìƒíƒœ)
  - ì—ëŸ¬ ë°œìƒ ì‹œ ì¦‰ì‹œ ì •ì§€ ë° ì•Œë¦¼

- **ì²´í¬í¬ì¸íŠ¸ ê¸°ë°˜ ë³µêµ¬**
  - ì‘ì—… ë‹¨ê³„ë³„ ìƒíƒœ ìë™ ì €ì¥
  - ì—ëŸ¬ ë³µêµ¬ í›„ ì¤‘ë‹¨ ì§€ì ë¶€í„° ì¬ê°œ
  - ì›¹ì—ì„œ Resume/Stop ì„ íƒ ê°€ëŠ¥

- **ë‹¤ë‹¨ê³„ ë³µêµ¬ ì „ëµ**
  1. Safe Stop í•´ì œ
  2. Servo-On ì¬ì‹œë„ (ìµœëŒ€ 3íšŒ)
  3. í•„ìš” ì‹œ ì „ì› ì¬ê¸°ë™ ê°€ì´ë“œ ì œê³µ

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Web Interface                        â”‚
â”‚  (Order Management, Real-time Monitoring, Error Control)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ Firebase Realtime DB
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BeauRo Controller                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â€¢ Order Processing                                   â”‚  â”‚
â”‚  â”‚  â€¢ Task State Management (Firebase Checkpoint)       â”‚  â”‚
â”‚  â”‚  â€¢ Error Detection & Recovery                        â”‚  â”‚
â”‚  â”‚  â€¢ Progress Reporting                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ ROS2 Service/Action
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Doosan Robotics M0609 Controller               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  DSR_ROBOT2 Library                                   â”‚  â”‚
â”‚  â”‚  â€¢ Motion Control (movel, movej)                     â”‚  â”‚
â”‚  â”‚  â€¢ Digital I/O Control (Gripper)                     â”‚  â”‚
â”‚  â”‚  â€¢ Robot State Monitoring                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ Hardware Control
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Physical Components                        â”‚
â”‚  â€¢ M0609 6-axis Collaborative Robot                        â”‚
â”‚  â€¢ Pneumatic Grippers (Pipette, Spoon, Stick)             â”‚
â”‚  â€¢ Material Containers & Well Plates                       â”‚
â”‚  â€¢ Safety Sensors                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë°ì´í„° íë¦„

```
Web â†’ Firebase â†’ BeauRo Controller â†’ ROS2 â†’ Robot â†’ Hardware
                      â†“
                 Checkpoint
                  (Resume)
                      â†‘
Web â† Firebase â† Error Handler â† Robot State Monitor
```

---

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

### ë¡œë´‡ ì œì–´
- **ROS2 Humble**: ë¡œë´‡ ìš´ì˜ì²´ì œ í”„ë ˆì„ì›Œí¬
- **DSR_ROBOT2**: ë‘ì‚° ë¡œë³´í‹±ìŠ¤ ê³µì‹ íŒŒì´ì¬ ë¼ì´ë¸ŒëŸ¬ë¦¬
- **Python 3.8+**: ë©”ì¸ í”„ë¡œê·¸ë˜ë° ì–¸ì–´

### í†µì‹  ë° ë°ì´í„°ë² ì´ìŠ¤
- **Firebase Realtime Database**: ì‹¤ì‹œê°„ ë°ì´í„° ë™ê¸°í™”
- **Firebase Admin SDK**: ì„œë²„ ì‚¬ì´ë“œ ë°ì´í„°ë² ì´ìŠ¤ ì œì–´

### í•˜ë“œì›¨ì–´
- **ë‘ì‚° ë¡œë³´í‹±ìŠ¤ M0609**: 6ì¶• í˜‘ë™ë¡œë´‡ (ê°€ë°˜í•˜ì¤‘ 6kg, ë„ë‹¬ê±°ë¦¬ 900mm)
- **ê³µì•• ê·¸ë¦¬í¼**: í”¼í«/ìŠ¤í‘¼/ìŠ¤í‹±ìš© 3ì¢…
- **ë””ì§€í„¸ I/O**: ê·¸ë¦¬í¼ ì œì–´ ì‹ í˜¸

### ì„¤ì • ê´€ë¦¬
- **YAML**: ì¬ë£Œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° ì¢Œí‘œ ê´€ë¦¬
- **JSON**: Firebase ë°ì´í„° êµ¬ì¡°

---

## ğŸ“¦ ì„¤ì¹˜ ë°©ë²•

### ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­

- Ubuntu 22.04 LTS
- ROS2 Humble
- Python 3.8 ì´ìƒ
- ë‘ì‚° ë¡œë³´í‹±ìŠ¤ M0609 ì œì–´ê¸°
- ì¸í„°ë„· ì—°ê²° (Firebase í†µì‹ ìš©)

### 1. ROS2 ì„¤ì¹˜

```bash
# ROS2 Humble ì„¤ì¹˜
sudo apt update && sudo apt install -y software-properties-common
sudo add-apt-repository universe
sudo apt update && sudo apt install -y curl
sudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key -o /usr/share/keyrings/ros-archive-keyring.gpg
echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu $(. /etc/os-release && echo $UBUNTU_CODENAME) main" | sudo tee /etc/apt/sources.list.d/ros2.list > /dev/null
sudo apt update
sudo apt install -y ros-humble-desktop
```

### 2. ë‘ì‚° ë¡œë³´í‹±ìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜

```bash
# ì‘ì—… ê³µê°„ ìƒì„±
mkdir -p ~/doosan_ws/src
cd ~/doosan_ws/src

# ë‘ì‚° ë¡œë³´í‹±ìŠ¤ ROS2 íŒ¨í‚¤ì§€ í´ë¡ 
git clone https://github.com/doosan-robotics/doosan-robot2.git

# ì˜ì¡´ì„± ì„¤ì¹˜
cd ~/doosan_ws
rosdep install --from-paths src --ignore-src -r -y

# ë¹Œë“œ
colcon build --symlink-install
source install/setup.bash
```

### 3. BeauRo í”„ë¡œì íŠ¸ ì„¤ì¹˜

```bash
# í”„ë¡œì íŠ¸ í´ë¡ 
git clone https://github.com/rokey-hyunj/beauro_ws.git
cd beauro_ws

# Python ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt
```

**requirements.txt**:
```
firebase-admin>=6.0.0
PyYAML>=6.0
rclpy
```

### 4. Firebase ì„¤ì •

1. [Firebase Console](https://console.firebase.google.com/)ì—ì„œ í”„ë¡œì íŠ¸ ìƒì„±
2. Realtime Database í™œì„±í™”
3. ì„œë¹„ìŠ¤ ê³„ì • í‚¤ ë‹¤ìš´ë¡œë“œ
4. `serviceAccountKey.json` íŒŒì¼ì„ í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ì €ì¥

```bash
# ë³´ì•ˆì„ ìœ„í•´ .gitignoreì— ì¶”ê°€
echo "serviceAccountKey.json" >> .gitignore
```

### 5. í™˜ê²½ ì„¤ì •

**material_library.yaml** íŒŒì¼ ìƒì„±:

```yaml
# ì•¡ìƒ ì¬ë£Œ
liquid_A:
  name: "Hyaluronic Acid Solution"
  type: "liquid"
  position: [x, y, z, rx, ry, rz]  # ë¡œë´‡ ì¢Œí‘œê³„
  
liquid_B:
  name: "Vitamin C Serum"
  type: "liquid"
  position: [x, y, z, rx, ry, rz]

# ë¶„ë§ ì¬ë£Œ
powder_A:
  name: "Titanium Dioxide"
  type: "powder"
  position: [x, y, z, rx, ry, rz]
  
powder_B:
  name: "Mica Powder"
  type: "powder"
  position: [x, y, z, rx, ry, rz]

# êµë°˜ ìŠ¤í‹±
stick:
  ready_1: [x, y, z, rx, ry, rz]
  ready_2: [x, y, z, rx, ry, rz]
  grab: [x, y, z, rx, ry, rz]
  drop: [x, y, z, rx, ry, rz]
  finished: [x, y, z, rx, ry, rz]

# íŠ¸ë ˆì´ ì¶œë ¥
tray_out:
  ready_1: [x, y, z, rx, ry, rz]
  ready_2: [x, y, z, rx, ry, rz]
  grab: [x, y, z, rx, ry, rz]
  drop: [x, y, z, rx, ry, rz]
  finished: [x, y, z, rx, ry, rz]

# íŠ¸ë ˆì´ ì¢Œí‘œ
tray_base:
  base: [x, y, z, rx, ry, rz]
  pitch_x: 57.0  # mm
  pitch_y: 38.0  # mm
```

---

## ğŸš€ ì‚¬ìš© ë°©ë²•

### 1. ROS2 í™˜ê²½ ì„¤ì •

```bash
# í„°ë¯¸ë„ 1: ROS2 ì†ŒìŠ¤
source /opt/ros/humble/setup.bash
source ~/beauro_ws/install/setup.bash
```

### 2. ë¡œë´‡ ì—°ê²° ë° ì¤€ë¹„

```bash
# ë¡œë´‡ ì œì–´ê¸° IP í™•ì¸ (ê¸°ë³¸ê°’: 192.168.137.100)
# ë„¤íŠ¸ì›Œí¬ ì„¤ì • í™•ì¸
ping 192.168.137.100

# ë¡œë´‡ ì „ì› ON â†’ Servo-On ìƒíƒœ í™•ì¸
```

### 3. BeauRo ì‹¤í–‰

```bash
# í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd beauro_ws

# ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
python3 beauro.py
```

**ì‹¤í–‰ ë¡œê·¸ ì˜ˆì‹œ**:
```
ğŸ”‘ Initializing Firebase...
âœ… Connected.
ğŸ¤– Initializing Robot...
   - Robot ID: dsr01
   - Model: m0609
   - Tool: Tool Weight
   - TCP: GripperDA_v1
âœ… Robot Ready.

âœ… Executor Ready. Waiting for Web Order...
```

### 4. ì›¹ ì¸í„°í˜ì´ìŠ¤ì—ì„œ ì£¼ë¬¸ ìƒì„±

Firebase Realtime Databaseì— ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ì£¼ë¬¸ ìƒì„±:

```json
{
  "current_order": {
    "order_id": "order_20240110_001",
    "status": "start",
    "doe_matrix": [
      {
        "well_id": "A1",
        "counts": {
          "l1": 2,
          "l2": 1,
          "p1": 1,
          "p2": 0
        }
      },
      {
        "well_id": "A2",
        "counts": {
          "l1": 1,
          "l2": 2,
          "p1": 0,
          "p2": 1
        }
      }
    ]
  }
}
```

**í•„ë“œ ì„¤ëª…**:
- `order_id`: ê³ ìœ  ì£¼ë¬¸ ì‹ë³„ì
- `status`: `start` (ì‹œì‘ ëŒ€ê¸°) / `processing` (ì§„í–‰ ì¤‘) / `finished` (ì™„ë£Œ)
- `doe_matrix`: ì›°ë³„ ë°°í•© ì •ë³´
  - `well_id`: ì›° í”Œë ˆì´íŠ¸ ìœ„ì¹˜ (A1, A2, ...)
  - `counts`: ê° ì¬ë£Œë³„ íˆ¬ì… íšŸìˆ˜
    - `l1`, `l2`: ì•¡ìƒ ì¬ë£Œ 1, 2
    - `p1`, `p2`: ë¶„ë§ ì¬ë£Œ 1, 2

### 5. ì§„í–‰ ìƒí™© ëª¨ë‹ˆí„°ë§

Firebase ê²½ë¡œ `/robot_state`ì—ì„œ ì‹¤ì‹œê°„ ìƒíƒœ í™•ì¸:

```json
{
  "robot_state": {
    "state": 2,  // 1: Idle, 2: Working, 3: Error
    "message": "Dispensing l1 to A1 (1/2)",
    "progress": 15,
    "phase": 1,  // 1: Dispensing, 2: Mixing
    "is_error": false,
    "error_message": ""
  }
}
```

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
beauro/
â”‚
â”œâ”€â”€ beauro.py                    # ë©”ì¸ ì‹¤í–‰ íŒŒì¼
â”œâ”€â”€ material_library.yaml        # ì¬ë£Œ ë° ì¢Œí‘œ ë¼ì´ë¸ŒëŸ¬ë¦¬
â”œâ”€â”€ serviceAccountKey.json       # Firebase ì¸ì¦ í‚¤ (ë¹„ê³µê°œ)
â”œâ”€â”€ requirements.txt             # Python ì˜ì¡´ì„±
â”‚
â”œâ”€â”€ docs/                        # ë¬¸ì„œ
â”‚   â”œâ”€â”€ installation.md
â”‚   â”œâ”€â”€ coordinate_teaching.md
â”‚   â””â”€â”€ troubleshooting.md
â”‚
â”œâ”€â”€ config/                      # ì„¤ì • íŒŒì¼
â”‚   â””â”€â”€ robot_config.yaml
â”‚
â””â”€â”€ README.md                    # ë³¸ íŒŒì¼
```

---

## ğŸ”„ ì›Œí¬í”Œë¡œìš°

### ì „ì²´ ì‘ì—… íë¦„

```
1. ì£¼ë¬¸ ìˆ˜ì‹  (Firebase: status = 'start')
   â†“
2. DoE Matrix íŒŒì‹±
   â†“
3. Phase 1: Dispensing (ë°°í•©)
   â”œâ”€â”€ L1 ì•¡ìƒ ë¶„ì£¼
   â”œâ”€â”€ L2 ì•¡ìƒ ë¶„ì£¼
   â”œâ”€â”€ P1 ë¶„ë§ íˆ¬ì…
   â””â”€â”€ P2 ë¶„ë§ íˆ¬ì…
   â†“
4. Phase 2: Mixing (êµë°˜)
   â”œâ”€â”€ ìŠ¤í‹± êµë°˜ (ê° ì›° 3íšŒ ë°˜ë³µ)
   â””â”€â”€ ì™„ì„± íŠ¸ë ˆì´ ì´ì†¡
   â†“
5. ì£¼ë¬¸ ì™„ë£Œ (Firebase: status = 'finished')
```

### ì•¡ìƒ ë¶„ì£¼ ì„¸ë¶€ ë‹¨ê³„ (Liquid)

```
LIQUID_INIT â†’ LIQUID_PICK â†’ LIQUID_SUCTION â†’ LIQUID_DISPENSE â†’ LIQUID_RETURN
     â†“              â†“              â†“                  â†“                â†“
  í™ˆ ìœ„ì¹˜      í”¼í« íŒŒì§€      ì•¡ì²´ í¡ì…          ì›°ì— ë¶„ì£¼         í”¼í« ë°˜ë‚©
```

### ë¶„ë§ íˆ¬ì… ì„¸ë¶€ ë‹¨ê³„ (Powder)

```
POWDER_INIT â†’ POWDER_PICK â†’ POWDER_SCOOP_MOVE â†’ POWDER_SCOOP â†’ POWDER_FLATTEN
     â†“              â†“              â†“                  â†“                â†“
  í™ˆ ìœ„ì¹˜      ìŠ¤í‘¼ íŒŒì§€      ìŠ¤ì¿± ìœ„ì¹˜ ì´ë™      ë¶„ë§ ì±„ì·¨        ë ˆë²¨ë§
     â†“
POWDER_POUR_MOVE â†’ POWDER_POUR â†’ POWDER_RETURN
     â†“                  â†“              â†“
  ì›° ìƒë‹¨ ì´ë™       ë¶„ë§ íˆ¬ì…       ìŠ¤í‘¼ ë°˜ë‚©
```

---

## ğŸ›¡ï¸ ì—ëŸ¬ í•¸ë“¤ë§ ë° ë³µêµ¬

### ìë™ ê°ì§€ ì—ëŸ¬ ìƒíƒœ

| ìƒíƒœ ì½”ë“œ | ì˜ë¯¸ | ë³µêµ¬ ì „ëµ |
|----------|------|----------|
| 3 | Safe Stop | Safe Stop í•´ì œ ì‹œë„ |
| 5 | E-Stop í™œì„±í™” | ìˆ˜ë™ E-Stop í•´ì œ í•„ìš” |
| 6 | Protective Stop | Safe Stop í•´ì œ í›„ ì¬ì‹œë„ |
| 9 | Servo-Off | Servo-On ì¬ì‹œë„ (ìµœëŒ€ 3íšŒ) |
| 10 | ì „ì› OFF | ì „ì› ì¬ê¸°ë™ ê°€ì´ë“œ ì œê³µ |

### ë³µêµ¬ í”„ë¡œì„¸ìŠ¤

```python
ì—ëŸ¬ ê°ì§€
  â†“
ë¡œë´‡ ì •ì§€ + Firebase ì—ëŸ¬ ì•Œë¦¼
  â†“
ì›¹ì—ì„œ ë³µêµ¬ ëª…ë ¹ ëŒ€ê¸° (resume/stop)
  â†“
Resume ì„ íƒ ì‹œ
  â†“
Safe Stop í•´ì œ ì‹œë„
  â†“
Servo-On ì¬ì‹œë„ (ìµœëŒ€ 3íšŒ)
  â†“
ì„±ê³µ â†’ ì²´í¬í¬ì¸íŠ¸ë¶€í„° ì¬ê°œ
ì‹¤íŒ¨ â†’ ìˆ˜ë™ ê°œì… ìš”ì²­
```

### ì²´í¬í¬ì¸íŠ¸ ì‹œìŠ¤í…œ

ëª¨ë“  ì‘ì—… ë‹¨ê³„ë§ˆë‹¤ Firebaseì— ìƒíƒœ ì €ì¥:

```json
{
  "task_checkpoint": {
    "order_id": "order_20240110_001",
    "task_type": "liquid",  // liquid, powder, stick, tray
    "tray_idx": 0,
    "count_idx": 1,
    "step": "LIQUID_DISPENSE",
    "material_key": "liquid_A",
    "error_count": 0,
    "timestamp": 1704873600
  }
}
```

ì—ëŸ¬ ë³µêµ¬ í›„ ì¤‘ë‹¨ëœ ì§€ì ë¶€í„° ìë™ìœ¼ë¡œ ì¬ê°œë©ë‹ˆë‹¤.

---

## âš™ï¸ ì„¤ì • íŒŒì¼

### beauro.py ë‚´ë¶€ ìƒìˆ˜

```python
# ë¡œë´‡ ì‹ë³„
ROBOT_ID = "dsr01"
ROBOT_MODEL = "m0609"

# ì†ë„ í”„ë¡œíŒŒì¼
VEL_MOVE = 2000      # ë¹ ë¥¸ ì´ë™ ì†ë„ (mm/s)
VEL_WORK = 500       # ì‘ì—… ì†ë„
VEL_SPOON = 250      # ìŠ¤í‘¼ ì‘ì—… ì†ë„ (ì •ë°€)
ACC = 500            # ê°€ì†ë„ (mm/sÂ²)
ACC_SPOON = 200      # ìŠ¤í‘¼ ì‘ì—… ê°€ì†ë„

# íŠ¸ë ˆì´ ê°„ê²©
TRAY_PITCH_X = 57.0  # Xì¶• ì›° ê°„ê²© (mm)
TRAY_PITCH_Y = 38.0  # Yì¶• ì›° ê°„ê²© (mm)

# Firebase ê²½ë¡œ
FIREBASE_DB_URL = 'https://beauro.firebaseio.com/'
```

### ê·¸ë¦¬í¼ ì œì–´ ì‹ í˜¸

```python
# Digital Output ë§¤í•‘
GRIPPER_SIGNALS = {
    "init": [1, 0, 0, 0, 0, 0],     # ì´ˆê¸°í™”
    "hold": [0, 1, 0, 0, 0, 0],     # íŒŒì§€
    "flatten": [0, 0, 1, 0, 0, 0],  # ë ˆë²¨ë§
    "release": [0, 0, 0, 1, 0, 0]   # í•´ì œ
}
```

---

## ğŸ” íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ 1: Firebase ì—°ê²° ì‹¤íŒ¨

**ì¦ìƒ**: `âŒ Init Error: ...`

**í•´ê²° ë°©ë²•**:
1. `serviceAccountKey.json` íŒŒì¼ ì¡´ì¬ í™•ì¸
2. Firebase í”„ë¡œì íŠ¸ URL í™•ì¸
3. ì¸í„°ë„· ì—°ê²° í™•ì¸
4. Firebase í”„ë¡œì íŠ¸ ê¶Œí•œ í™•ì¸

### ë¬¸ì œ 2: ë¡œë´‡ ì‘ë‹µ ì—†ìŒ

**ì¦ìƒ**: ë¡œë´‡ì´ ëª…ë ¹ì— ë°˜ì‘í•˜ì§€ ì•ŠìŒ

**í•´ê²° ë°©ë²•**:
1. ë¡œë´‡ ì œì–´ê¸° ë„¤íŠ¸ì›Œí¬ ì—°ê²° í™•ì¸
2. Servo-On ìƒíƒœ í™•ì¸
3. E-Stop í•´ì œ í™•ì¸
4. ROS2 ë…¸ë“œ ìƒíƒœ í™•ì¸: `ros2 node list`

### ë¬¸ì œ 3: ì¢Œí‘œ ì •í™•ë„ ë¬¸ì œ

**ì¦ìƒ**: ë¡œë´‡ì´ ëª©í‘œ ìœ„ì¹˜ì— ì •í™•íˆ ë„ë‹¬í•˜ì§€ ëª»í•¨

**í•´ê²° ë°©ë²•**:
1. í‹°ì¹­ íœë˜íŠ¸ë¡œ ì¢Œí‘œ ì¬êµì‹œ
2. `material_library.yaml` ì—…ë°ì´íŠ¸
3. TCP ì˜¤í”„ì…‹ í™•ì¸
4. ë¡œë´‡ ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ìˆ˜í–‰

### ë¬¸ì œ 4: ë³µêµ¬ ì‹¤íŒ¨ ë°˜ë³µ

**ì¦ìƒ**: ì—ëŸ¬ ë³µêµ¬ê°€ ê³„ì† ì‹¤íŒ¨í•¨

**í•´ê²° ë°©ë²•**:
1. ë¡œë´‡ ì œì–´ê¸° ì¬ë¶€íŒ…
2. ìˆ˜ë™ìœ¼ë¡œ ì•ˆì „í•œ ìœ„ì¹˜ë¡œ ì´ë™
3. ì²´í¬í¬ì¸íŠ¸ ì‚­ì œ: `db.reference('task_checkpoint').delete()`
4. ì£¼ë¬¸ ì¬ì‹œì‘

---

## ğŸ¤ ê¸°ì—¬í•˜ê¸°

í”„ë¡œì íŠ¸ ê°œì„ ì— ì°¸ì—¬í•´ì£¼ì„¸ìš”!

### ê¸°ì—¬ ë°©ë²•

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

### ì´ìŠˆ ì œë³´

ë²„ê·¸ ë°œê²¬ ì‹œ ë‹¤ìŒ ì •ë³´ì™€ í•¨ê»˜ ì´ìŠˆ ë“±ë¡:
- ë¡œë´‡ ëª¨ë¸ ë° íŒì›¨ì–´ ë²„ì „
- ROS2 ë²„ì „
- ì—ëŸ¬ ë¡œê·¸
- ì¬í˜„ ë°©ë²•

---

## ğŸ‘¥ íŒ€

- **ë¡œë´‡ ì œì–´**: [ê¹€í˜„ì¢…] - íŒŒìš°ë” ìŠ¤ì¿ í•‘ ë™ì‘ ë° ì•ˆì „ ì‹œìŠ¤í…œ ì„¤ê³„
- **ë¡œë´‡ ì œì–´**: [ì •ì˜ˆì°¬] - ìŠ¤í‹± stirring ë™ì‘ ë° 3D CAD ì„¤ê³„
- **ë¡œë´‡ ì œì–´**: [ë°°ë¯¼í˜] - ìŠ¤í¬ì´ë“œ í”¼í«íŒ… ë™ì‘ ì„¤ê³„
- **ì›¹ ê°œë°œ**: [í™©ìµì£¼] - Firebase í†µì‹  ë° ìƒíƒœ ê´€ë¦¬ ë° ì›¹ ì¸í„°í˜ì´ìŠ¤
- **í•˜ë“œì›¨ì–´**: [ê¹€ë‚¨ê·œ] - 3D CAD ì„¤ê³„ ë° í”„ë¦°íŒ…, ë¬¸ì„œ ì‘ì—…

## ğŸ“ ë¬¸ì˜

- **ì´ë©”ì¼**: hyunjongkim0524@gmail.com
- **ì´ìŠˆ íŠ¸ë˜ì»¤**: [GitHub Issues](https://github.com/rokey-hyunj/beauro_ws/issues)

---

## ğŸ—ºï¸ ë¡œë“œë§µ

### v1.0 (ì™„ë£Œ)
- [x] ê¸°ë³¸ ì•¡ìƒ/ë¶„ë§ ë°°í•© ê¸°ëŠ¥
- [x] Firebase ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
- [x] ìë™ ì—ëŸ¬ ë³µêµ¬

### v1.1 (ì§„í–‰ ì¤‘)
- [ ] ë‹¤ì¤‘ íŠ¸ë ˆì´ ì§€ì› (96-well plate)
- [ ] ì¬ë£Œ ì¬ê³  ê´€ë¦¬ ì‹œìŠ¤í…œ
- [ ] ë°°í•© ì´ë ¥ ë°ì´í„°ë² ì´ìŠ¤

### v2.0 (ê³„íš)
- [ ] ë¹„ì „ ì‹œìŠ¤í…œ í†µí•© (ì¬ë£Œ ì¸ì‹)
- [ ] AI ê¸°ë°˜ ìµœì  ë°°í•© ì¶”ì²œ
- [ ] ë‹¤ì¤‘ ë¡œë´‡ í˜‘ì—… ì‹œìŠ¤í…œ

---

<div align="center">

**â­ ì´ í”„ë¡œì íŠ¸ê°€ ìœ ìš©í•˜ë‹¤ë©´ Starë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”! â­**

Made with â¤ï¸ by BeauRo Team

</div>